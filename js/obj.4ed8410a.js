(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["obj"],{aada:function(e,n,t){},adb3:function(e,n,t){"use strict";t.r(n);var r=t("7a23");const a={class:"obj"};function c(e,n,t,c,l,s){const i=Object(r["z"])("Adjacent");return Object(r["s"])(),Object(r["f"])("div",a,[Object(r["i"])(i,{panel_fmid:e.data.panel_fmid},{default:Object(r["E"])(()=>[Object(r["h"])(Object(r["B"])(e.data.panel_fmid),1)]),_:1},8,["panel_fmid"])])}const l=e=>(Object(r["v"])("data-v-098f7e00"),e=e(),Object(r["t"])(),e),s={key:0,class:"adjacent"},i={id:"graphviz"},d=["src"],o={key:1,class:"error"},p={key:0},_=l(()=>Object(r["g"])("br",null,null,-1));function h(e,n,t,a,c,l){return Object(r["s"])(),Object(r["f"])(r["a"],null,[e.data.panel_name?(Object(r["s"])(),Object(r["f"])("div",s,[Object(r["g"])("h1",null,Object(r["B"])(e.data.panel_name),1),Object(r["g"])("div",i,[Object(r["g"])("iframe",{src:e.data.src},null,8,d)])])):Object(r["e"])("",!0),e.data.error.title?(Object(r["s"])(),Object(r["f"])("div",o,[e.data.error.title?(Object(r["s"])(),Object(r["f"])("h1",p,Object(r["B"])(e.data.error.title),1)):Object(r["e"])("",!0),(Object(r["s"])(!0),Object(r["f"])(r["a"],null,Object(r["y"])(e.data.error.message,e=>(Object(r["s"])(),Object(r["f"])("div",{style:{"text-align":"left"},key:e},[Object(r["h"])(Object(r["B"])(e),1),_]))),128))])):Object(r["e"])("",!0)],64)}t("14d9");var m=t("cee4"),b=t("34d4");async function u(e){try{const n=b.sparqlUrl,t=`\n            PREFIX brick: <https://brickschema.org/schema/Brick#>\n            PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\n            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n\n            select distinct ?tgt ?tgt_nm ?parent_nm ?proc_nm ?child_nm ?parent ?child ?parent_tp_nm ?child_tp_nm ?parent_is_uri ?child_is_uri where{\n                #検索対象を取得\n                ?child <http://www.semanticweb.org/chensisi/ontologies/2022/9/untitled-ontology-163:OWLObjectProperty_c91c8dae_12f9_45ab_ac9e_35a81e8c9dc3> "${e}"@ja. #FMID：検索キー\n                \n                #再帰的に検索対象の下流のオブジェクトを検索（全種類の述語）\n                ?parent ?proc ?child.\n                ?parent rdfs:label ?parent_nm.\n                ?child rdfs:label ?child_nm.\n                ?proc rdfs:label ?proc_nm.\n                \n                #上流側要素のタイプ\n                ?parent a ?parent_tp.\n                ?parent_tp rdfs:label ?parent_tp_nm.\n            \n                #下流側要素のタイプ\n                ?child a ?child_tp.\n                ?child_tp rdfs:label ?child_tp_nm.\n            \n                #URIかどうか確認\n                BIND (isURI(?parent) AS ?parent_is_uri)\n                BIND (isURI(?child) AS ?child_is_uri)\n            \n                #tgtに値を設定\n                BIND (?child AS ?tgt)\n                ?tgt rdfs:label ?tgt_nm.\n            }\n        `,r=`\n            PREFIX brick: <https://brickschema.org/schema/Brick#>\n            PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\n            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n            \n            select distinct ?tgt ?tgt_nm ?parent_nm ?proc_nm ?child_nm ?parent ?child ?parent_tp_nm ?child_tp_nm ?parent_is_uri ?child_is_uri where{\n                #検索対象を取得\n                ?parent <http://www.semanticweb.org/chensisi/ontologies/2022/9/untitled-ontology-163:OWLObjectProperty_c91c8dae_12f9_45ab_ac9e_35a81e8c9dc3> "${e}"@ja. #FMID：検索キー\n            \n                #再帰的に検索対象の下流のオブジェクトを検索（全種類の述語）\n                ?parent ?proc ?child.\n                ?parent rdfs:label ?parent_nm.\n                OPTIONAL {?child rdfs:label ?child_nm.} #?childが文字列の場合は?child_nmが取れないので、任意とした\n                ?proc rdfs:label ?proc_nm.\n                \n                #上流側要素のタイプ\n                ?parent a ?parent_tp.\n                ?parent_tp rdfs:label ?parent_tp_nm.\n                \n                #下流側要素のタイプ #?childが文字列の場合は?child_tpが取れないので、任意とした\n                OPTIONAL {\n                    ?child a ?child_tp.\n                    ?child_tp rdfs:label ?child_tp_nm.\n                }\n                \n                #URIかどうか確認\n                BIND (isURI(?parent) AS ?parent_is_uri)\n                BIND (isURI(?child) AS ?child_is_uri)\n                \n                #tgtに値を設定\n                BIND (?parent AS ?tgt)\n                ?tgt rdfs:label ?tgt_nm.\n            }\n        `,a=n+"?query="+encodeURIComponent(t),c=n+"?query="+encodeURIComponent(r),l=await m["a"].get(a),s=await m["a"].get(c);let i="",d={},o={};[i,d,o]=g(l.data.results.bindings,i,d,o),[i,d,o]=g(s.data.results.bindings,i,d,o);const p=f(i,d,o);return[i,p,""]}catch(n){return["Error","",n]}}function g(e,n,t,r){return e.forEach(e=>{n||(n=e["tgt_nm"]["value"]),console.log("tgt_node: "+n);const a=e["parent_nm"]["value"];console.log("parent_nm: "+a);const c=e["child_nm"]?e["child_nm"]["value"]:e["child"]["value"];console.log("child_nm: "+c);const l=1==e["parent_is_uri"]["value"]?e["parent"]["value"]:"";console.log("parent_uri: "+l);const s=1==e["child_is_uri"]["value"]||e["child"]&&e["child"]["value"].startsWith("http")?e["child"]["value"]:"";console.log("child_uri: "+s);const i=e["proc_nm"]?e["proc_nm"]["value"]:"";console.log("edge: "+i),a+c+i in t||(t[a+c+i]={parent_nm:a,child_nm:c,edge:i},a in r||(r[a]=l),c in r||(r[c]=s))}),[n,t,r]}function f(e,n,t){let r="digraph g {\n";r+="rankdir=LR\n",r+="node [style=filled,color=red];\n",r+=`"${e}";\n`,r+="node [style=filled,color=lightgrey];\n";for(const a of Object.values(n))r+=`"${a.parent_nm}" -> "${a.child_nm}" [label="${a.edge}"]\n`;for(const a of Object.keys(t))r+=`"${a}" [URL="${t[a]}"]\n`;return r+="}",console.log(r),r}var j=Object(r["j"])({name:"Adjacent",props:{panel_fmid:String},setup(e){const n=Object(r["w"])({panel_name:"",treedata:[{}],active:"",src:"",error:{title:"",message:[]}});return u(e.panel_fmid).then(([t,r,a])=>{if(t&&"Error"!==t){n.panel_name=t;const e=b.graphvizUrl+"?digraph="+encodeURIComponent(r);console.log(e),n.src=e}else t?(n.error.title=b.dataException.title,b.dataException.message.forEach(e=>{n.error.message.push(e)}),n.error.message.push("・エラーコード：E002"),n.error.message.push("・URLパラメータ1：switch"),n.error.message.push("・FMID："+e.panel_fmid),n.error.message.push("・内容："+a)):(n.error.title=b.notFound.title,b.notFound.message.forEach(e=>{n.error.message.push(e)}),n.error.message.push("・エラーコード：E001"),n.error.message.push("・URLパラメータ1：switch"),n.error.message.push("・FMID："+e.panel_fmid))}),{data:n}}}),O=(t("d5b2"),t("6b0d")),w=t.n(O);const I=w()(j,[["render",h],["__scopeId","data-v-098f7e00"]]);var v=I,y=t("6605"),R=Object(r["j"])({name:"Obj",components:{Adjacent:v},setup(){const e=Object(r["w"])({panel_fmid:""}),n=Object(y["c"])();return e.panel_fmid=n.params.fmid,{data:e}}});const E=w()(R,[["render",c]]);n["default"]=E},d5b2:function(e,n,t){"use strict";t("aada")}}]);
//# sourceMappingURL=obj.4ed8410a.js.map