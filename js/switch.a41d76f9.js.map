{"version":3,"sources":["webpack:///./src/components/Menu.vue?a13e","webpack:///./src/views/Switch.vue?ee47","webpack:///./src/components/Menu.vue?5970","webpack:///./src/services/SparqlApiService.ts","webpack:///./src/components/Menu.vue","webpack:///./src/components/Menu.vue?e357","webpack:///./src/views/Switch.vue","webpack:///./src/views/Switch.vue?3189"],"names":["_hoisted_1","class","render","_ctx","_cache","$props","$setup","$data","$options","_component_Menu","_resolveComponent","_openBlock","_createElementBlock","_createVNode","panel_fmid","data","default","_withCtx","_createTextVNode","_toDisplayString","_","_withScopeId","n","_pushScopeId","_popScopeId","key","_hoisted_2","id","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_createElementVNode","_Fragment","panel_name","_renderList","treedata","sw","_normalizeClass","active","onClick","$event","dropdown","sw_name","bottom_objs","obj","href","obj_url","label","obj_name","_createCommentVNode","error","title","message","item","style","async","getSparql","baseUrl","settings","sparqlUrl","query","url","encodeURIComponent","response","axios","get","resData","results","bindings","forEach","value","push","ENDOBJ_NM","ENDOBJ_SCAN","ex","defineComponent","name","props","String","setup","reactive","list","then","sparqlData","Object","keys","dataException","notFound","__exports__","components","Menu","route","useRoute","params","fmid"],"mappings":"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","file":"js/switch.a41d76f9.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Menu.vue?vue&type=style&index=0&id=d9a6b580&scoped=true&lang=css\"","import { toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"switch\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_Menu = _resolveComponent(\"Menu\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_component_Menu, {\n      panel_fmid: _ctx.data.panel_fmid\n    }, {\n      default: _withCtx(() => [\n        _createTextVNode(_toDisplayString(_ctx.data.panel_fmid), 1)\n      ]),\n      _: 1\n    }, 8, [\"panel_fmid\"])\n  ]))\n}","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-d9a6b580\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  key: 0,\n  class: \"menu\"\n}\nconst _hoisted_2 = { id: \"app\" }\nconst _hoisted_3 = { class: \"list\" }\nconst _hoisted_4 = [\"onClick\"]\nconst _hoisted_5 = { key: 0 }\nconst _hoisted_6 = [\"href\", \"label\"]\nconst _hoisted_7 = {\n  key: 1,\n  class: \"error\"\n}\nconst _hoisted_8 = { key: 0 }\nconst _hoisted_9 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1))\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    (_ctx.data.panel_name)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n          _createElementVNode(\"h1\", null, _toDisplayString(_ctx.data.panel_name), 1),\n          _createElementVNode(\"div\", _hoisted_2, [\n            _createElementVNode(\"ul\", _hoisted_3, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.data.treedata, (sw) => {\n                return (_openBlock(), _createElementBlock(\"li\", {\n                  key: sw.id,\n                  class: \"list-item\"\n                }, [\n                  _createElementVNode(\"a\", {\n                    class: _normalizeClass({active:_ctx.data.active===sw}),\n                    onClick: ($event: any) => (_ctx.dropdown(sw.sw_name))\n                  }, _toDisplayString(sw.sw_name), 11, _hoisted_4),\n                  (_ctx.data.active===sw.sw_name)\n                    ? (_openBlock(), _createElementBlock(\"ul\", _hoisted_5, [\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(sw.bottom_objs, (obj) => {\n                          return (_openBlock(), _createElementBlock(\"li\", {\n                            key: obj.id,\n                            class: \"sublist-item\"\n                          }, [\n                            _createElementVNode(\"a\", {\n                              href: obj.obj_url,\n                              label: obj.obj_name\n                            }, _toDisplayString(obj.obj_name), 9, _hoisted_6)\n                          ]))\n                        }), 128))\n                      ]))\n                    : _createCommentVNode(\"\", true)\n                ]))\n              }), 128))\n            ])\n          ])\n        ]))\n      : _createCommentVNode(\"\", true),\n    (_ctx.data.error.title)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n          (_ctx.data.error.title)\n            ? (_openBlock(), _createElementBlock(\"h1\", _hoisted_8, _toDisplayString(_ctx.data.error.title), 1))\n            : _createCommentVNode(\"\", true),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.data.error.message, (item) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n              style: {\"text-align\":\"left\"},\n              key: item\n            }, [\n              _createTextVNode(_toDisplayString(item), 1),\n              _hoisted_9\n            ]))\n          }), 128))\n        ]))\n      : _createCommentVNode(\"\", true)\n  ], 64))\n}","import axios from \"axios\";\r\nimport settings from '@/assets/settings.json';\r\n\r\ntype EndObj = {ENDOBJ_NM: string; ENDOBJ_SCAN: string;};\r\ntype Switch = {[key: string]: EndObj[];}; //key=SW_LBL\r\nexport async function getSparql(panel_fmid: string): Promise<[string, Switch, any]> {\r\n    try {\r\n        //SPARQLのbaseURLを取得\r\n        const baseUrl = settings.sparqlUrl;\r\n\r\n        const query = `\r\n            PREFIX brick: <https://brickschema.org/schema/Brick#>\r\n            PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\r\n            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\r\n    \r\n            select distinct ?PANEL_NM, ?SW_LBL, ?ENDOBJ_NM, ?ENDOBJ_SCAN where{\r\n            #電灯盤取得\r\n            ?PANEL <http://www.semanticweb.org/chensisi/ontologies/2022/9/untitled-ontology-163:OWLObjectProperty_c91c8dae_12f9_45ab_ac9e_35a81e8c9dc3> \"${panel_fmid}\"@ja. #FMID：検索キー\r\n            ?PANEL rdfs:label ?PANEL_NM.\r\n    \r\n            #電灯盤SW取得\r\n            ?PANEL brick:hasPart ?SW.\r\n            ?SW rdfs:label ?SW_NM.\r\n            ?SW <http://www.semanticweb.org/chensisi/ontologies/2022/9/untitled-ontology-163:OWLObjectProperty_d7843f2a_8710_4d42_bbe7_20f29037fd8e> ?SW_MEMO. #※備考\r\n            ?SW <http://www.semanticweb.org/chensisi/ontologies/2022/9/untitled-ontology-163:OWLObjectProperty_7dce3876_b400_4a5a_a6d4_e37c5f2f2a1d> ?SW_LBL. #★ラベル：水色ボタンに表示\r\n    \r\n            #回路取得\r\n            ?SW brick:feeds ?CIRC.\r\n            ?CIRC rdfs:label ?CIRC_NM.\r\n    \r\n            #末端オブジェクト取得\r\n            ?CIRC brick:feeds ?ENDOBJ.\r\n            ?ENDOBJ rdfs:label ?ENDOBJ_NM. #末端オブジェクト名称：白ボタンに表示\r\n            ?ENDOBJ <http://www.semanticweb.org/chensisi/ontologies/2022/9/untitled-ontology-163:OWLObjectProperty_cbdc3161_268f_4b71_8f71_5727436a50ba> ?ENDOBJ_SCAN. #3DスキャンURL：白ボタンにリンク埋め込み\r\n            }\r\n        `;\r\n        const url = baseUrl + '?query=' + encodeURIComponent(query);\r\n  \r\n        // APIを呼び出す\r\n        const response = await axios.get(url);\r\n\r\n        // 取得結果を設定（電灯盤SWをkeyとする、末端オブジェクトの配列を生成）\r\n        const resData:Switch = {};\r\n        let panel_name = '';\r\n        response.data.results.bindings.forEach((value:any) => {\r\n            if(!panel_name){\r\n                panel_name = value['PANEL_NM']['value'];\r\n            }\r\n\r\n            if(!(value['SW_LBL']['value'] in resData)){\r\n                resData[value['SW_LBL']['value']] = [];\r\n            }\r\n            resData[value['SW_LBL']['value']].push({ENDOBJ_NM: value['ENDOBJ_NM']['value'], ENDOBJ_SCAN: value['ENDOBJ_SCAN']['value']});\r\n        });\r\n\r\n        return [panel_name, resData, ''];\r\n    } catch (ex) {\r\n        return ['Error', {}, ex];\r\n    }\r\n}\r\n","\nimport { defineComponent, reactive } from 'vue';\nimport { getSparql } from '@/services/SparqlApiService';\nimport settings from '@/assets/settings.json';\n\n//参考HP\n//https://arrown-blog.com/vuejs-dropdownmenu/\n//https://tedate.jp/vue-js/how-to-changing-the-data-part-in-vue3\n\nexport default defineComponent({\n  name: 'Menu',\n  props: {\n    panel_fmid: String,\n  },\n  setup(props){\n    const data = reactive({\n      panel_name:\"\",\n      treedata:[{}],//ボタンを表示する階層データ\n      active:\"\",\n      error: {\n        title:\"\",\n        message:[] as string[]\n      }\n    })\n\n    //画面に表示する階層構造のデータをセット\n    getSparql((props.panel_fmid) as string).then(([panel_name, sparqlData, ex]) => {\n      if (panel_name && panel_name !=='Error') {\n        data.panel_name = panel_name;\n\n        type bottom_obj = {obj_name: string; obj_url: string;};\n        const treedata:{sw_name: string; bottom_objs: bottom_obj[]}[] = [];\n\n        // key(電灯盤SW)単位で繰り返し、末端オブジェクトの配列を設定\n        Object.keys(sparqlData).forEach((key: string) => {\n          const bottom_objs:bottom_obj[] = [];\n          sparqlData[key].forEach((value: any) => {\n            bottom_objs.push(\n              {\n                obj_name: value['ENDOBJ_NM'],\n                obj_url: value['ENDOBJ_SCAN']\n              }\n            );\n          });\n          \n          treedata.push(\n            {\n              sw_name: key,\n              bottom_objs: bottom_objs\n            }\n          );\n        });\n\n        data.treedata = treedata;\n      } else if (!panel_name) {\n        data.error.title = settings.notFound.title;\n        settings.notFound.message.forEach((value:string) => {\n          data.error.message.push(value);\n        });\n        data.error.message.push('・エラーコード：E001');\n        data.error.message.push('・URLパラメータ1：switch');\n        data.error.message.push(`・FMID：${props.panel_fmid}`);\n      } else {\n        data.error.title = settings.dataException.title;\n        settings.dataException.message.forEach((value:string) => {\n          data.error.message.push(value);\n        });\n        data.error.message.push('・エラーコード：E002');\n        data.error.message.push('・URLパラメータ1：switch');\n        data.error.message.push(`・FMID：${props.panel_fmid}`);\n        data.error.message.push(`・内容：${ex}`);\n      }\n    });\n\n    //method\n    //https://tech.synapse.jp/entry/2022/08/15/113000\n    function dropdown(list:string) {\n        data.active = data.active===list ? \"\":list;\n    }\n    \n    return{\n      data,\n      dropdown\n    }\n  }\n});\n","import { render } from \"./Menu.vue?vue&type=template&id=d9a6b580&scoped=true&ts=true\"\nimport script from \"./Menu.vue?vue&type=script&lang=ts\"\nexport * from \"./Menu.vue?vue&type=script&lang=ts\"\n\nimport \"./Menu.vue?vue&type=style&index=0&id=d9a6b580&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Work\\\\事業開発（NavVis）\\\\pub_sdm_dialog_demo\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-d9a6b580\"]])\n\nexport default __exports__","\nimport { defineComponent, reactive } from 'vue';\nimport Menu from '@/components/Menu.vue'; // @ is an alias to /src\nimport { useRoute } from 'vue-router'; \n\nexport default defineComponent({\n  name: 'Switch',\n  components: {\n    Menu,\n  },\n  setup(){\n    //data\n    const data = reactive({\n      panel_fmid:\"\"\n    })\n\n    //URLのパラメータの値を取得\n    //参考\n    //https://codelikes.com/use-vue-router/#toc4\n    //接続時のサンプルURL\n    //http://localhost:8080/switch/E_LB_105\n    const route = useRoute();\n    data.panel_fmid = (route.params.fmid) as string;\n\n    return{\n      data\n    }\n  }\n});\n","import { render } from \"./Switch.vue?vue&type=template&id=60bafda5&ts=true\"\nimport script from \"./Switch.vue?vue&type=script&lang=ts\"\nexport * from \"./Switch.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"C:\\\\Work\\\\事業開発（NavVis）\\\\pub_sdm_dialog_demo\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}